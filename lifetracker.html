<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Life Tracker App</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
  <!--<link rel="stylesheet" href="css/styles.css?v=1.0">-->
  <style>
      table, th, td {
          border-radius: 0.5em;
          border: 1px solid black;
          padding: 8px;
          text-align: center;
      }
      th {
          background-color: #a9b7ad;
      }
      .month {
          text-align: right;
          background-color: #EEEEEE;
      }
      .cells {
          font-size: 10px;
          padding:2px 4px;
          color: green;
      }
      .cells:hover {
          background: #f2f5ff;
          border-radius:5px;
      }
      #homeHeader {
          background-color: #f8d3c5;
          width: 175px;
      }
      #careerHeader {
          background-color: #f4e2cc;
          width: 175px;
      }
      #travelHeader {
          background-color: #deccca;
          width: 175px;
      }
      #eventsHeader {
          background-color: #debbb0;
          width: 175px;
      }
      .details {
          text-align: left;
      }
      form {
          margin: 15px 2px;   
      }
      label {
          margin-left: 15px;
      }
  </style>
</head>

<body>
    <!--<script src="js/scripts.js"></script>
    <script src="jquery-3.4.1.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <h1>Life Journal v2.0</h1>
    <h3>Instructions</h3>
    <ol>
        <li>Enter your name and birth year and click "Go!"</li>
        <li>Then select the year and type of life event and click "Add Event!"</li>
        <li>Look back here anytime you forget something!</li>
    </ol>
   
    <form id="form" action="/action_page.php">
        <label for="fname">Your Name: </label><input type="text" id="fname" name="fname" placeholder="Mel">
        <label for="year">Birth Year: </label><input type="text" id="formyear" name="year" placeholder="1990">
        <input type="button" onclick="updateInfo(document.getElementById('fname').value,document.getElementById('formyear').value)" value="Go!">
    </form>
    <form id="cellform" action="/action_page.php">
        <label for="cellYear">Year: </label>
        <select id="cellYear">
        </select>
        <label for="type">Event Type: </label>
        <select id="eventType">
            <option value="h">Home</option>
            <option value="c">Career</option>
            <option value="v">Vacation</option>
            <option value="e">Event</option>
        </select>
        <label for="celldetails">Event: </label><input type="text" id="eventDetails" name="eventDetails" placeholder="Enter your event here!">
        <input type="button" onclick="updateCell(document.getElementById('eventType').value+document.getElementById('cellYear').value,document.getElementById('eventDetails').value)" value="Add Event!">
    </form>
    
    <h2 id="name">Your Life!</h2>
    <table>
        <tr id="row0">
            <th>Year</th>
            <th>Age</th>
            <th id="homeHeader">Home<br>(Address/Apartment)</th>
            <th id="careerHeader">Career<br>(School/Jobs)</th>
            <th id="travelHeader">Vacation<br>(Travel/Trips)</th>
            <th id="eventsHeader">Events<br>(Weddings/Babies)</th>
        </tr>
    </table><br>
    <button onclick="localStorage.clear()">Restart (then refresh page)</button>

    <script>
        var thisYear = new Date().getFullYear();
        
        if (localStorage.getItem('name') && localStorage.getItem('birthYear')) {
                var fname = localStorage.getItem('name');
                var year = localStorage.getItem('birthYear');
                updateInfo(fname,year);
                var list = ["h","c","v","e"];
                var x;
                var y = thisYear;
                for (x of list) {
                    while (y >= year) {
                        if (localStorage.getItem(x+y) !== "null" && localStorage.getItem(x+y) !== undefined) {
                            updateCell(x + y,localStorage.getItem(x+y));
                        };
                        y -=1;
                    };
                    y = thisYear;
                };
            };
        
        function updateInfo(fname,year) {
            document.getElementById("name").innerHTML = fname + "'s Life!";
            var birthYear = parseInt(year);
            var headerRow = document.getElementById("row0");
            var x = thisYear;
            while (x >= birthYear) {
                document.querySelector("table").innerHTML += "<tr><td>"+ x +"</td><td>" + (x-birthYear) + "</td><td class='details' id='h"+x+"'></td><td class='details' id='c"+x+"'></td><td class='details' id='v"+x+"'></td><td class='details' id='e"+x+"'></td></tr>";
                document.getElementById("cellYear").innerHTML += "<option value='" + x + "'>" + x + "</option>";
                x -=1;
            }
            localStorage.setItem('name',fname);
            localStorage.setItem('birthYear',year);
            document.getElementById("form").style.display="none";
        }
        
        function updateCell(id,cellinfo) {
            document.getElementById(id).innerHTML += cellinfo;
            localStorage.setItem(id,cellinfo);
        }
    </script>
</body>
</html>
